<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- <link rel="stylesheet" href="styles.css"> -->
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <link href = "../static/styles.css" rel = "stylesheet">
</head>
<body>
    <!-- Bootstrap Navbar (Logo Left, Links Right) -->
    <nav class="navbar navbar-static-top navbar-expand-lg navbar-light bg-white shadow-sm sticky-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="{{url_for('index')}}">Interview Practice</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link fw-semibold text-dark" href="{{url_for('index')}}">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-semibold text-dark" href="{{url_for('advice')}}">Advice</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-semibold text-dark" href="{{url_for('results')}}">Results</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link fw-semibold text-dark" href="{{url_for('help')}}">Help</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <!-- Add spacing below navbar -->
<div class="mt-4"></div>
<div class = "resultsPage">
    <h1>Results Dashboard</h1>
    <div class="top-container">
        <div class="chart-container">
            <canvas id="starChart"></canvas>
        </div>
        <div class="chart-container">
            <canvas id="lineChart"></canvas><br>
            <h2>AI Chat and Feed</h2>
            <div id="chatbox"></div><br>
            <input type="text" id="inputBox" class="form-group" placeholder="Chat to me..." onkeypress="handleKeyPress(event)">
        </div>
    </div>
</div>

    <script>
        // Star Chart (Radar)
        const starCtx = document.getElementById('starChart').getContext('2d');
        new Chart(starCtx, {
            type: 'radar',
            data: {
                labels: ['Relevance', 'Conciseness', 'Pacing', 'Completeness', 'Focus'],
                datasets: [{
                    data: [5, 3, 4, 2, 5],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2
                }]
            },
            options: {
                plugins: {
                    legend: { display: false }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutElastic'
                }
            }
        });

        // Line Chart (Performance Over Time)
        const lineCtx = document.getElementById('lineChart').getContext('2d');
        const labels = ['Jan', 'Feb', 'Mar', 'Apr', 'May'];
        const dataPoints = [10, 15, 9, 20, 25];

        const lineChart = new Chart(lineCtx, {
            type: 'line',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Performance',
                    data: dataPoints,
                    borderColor: 'rgba(255, 99, 132, 1)',
                    backgroundColor: 'rgba(255, 99, 132, 0.2)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                scales: {
                    x: {
                        ticks: {
                            callback: (value, index) => labels[index] || ''
                        }
                    },
                    y: { beginAtZero: true }
                },
                plugins: {
                    legend: { display: true }
                },
                animation: {
                    duration: 2000,
                    easing: 'easeInOutQuart'
                }
            }
        });

        // Chatbox Logic
        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('inputBox');
                const chatbox = document.getElementById('chatbox');
                
                if (input.value.trim() !== '') {
                    chatbox.innerHTML += `<p><strong>You:</strong> ${input.value}</p>`;
                    chatbox.innerHTML += `<p><strong>AI:</strong> Let me think...</p>`;
                    input.value = '';
                    chatbox.scrollTop = chatbox.scrollHeight;
                }
            }
        }
    </script>
</body>
</html>
